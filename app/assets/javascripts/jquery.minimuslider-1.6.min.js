/* jquery.minimuslider v.1.6 | (c) 2012-17 Federica Sibella musings(at)musings(dot)it | http://www.musings.it | MIT license */
!function(i){function t(t){var n=i("#minimus-slide"+t.instance+"_"+t.current),e=n.find("img");if(e.length>0){t.is_retina&&""!==e.attr("data-src-2x")&&void 0!==e.attr("data-src-2x")?e.attr("src")!==e.attr("data-src-2x")&&e.attr("src",e.attr("data-src-2x")):e.attr("src")!==e.attr("data-src")&&e.attr("src",e.attr("data-src"));var a=e,r=new Image;r.onload=function(){var i=r.width,a=r.height,o=a/i,s=t.slider,d=t.calc_width,c=t.calc_height,m=Math.round(d*o);if("adjust"===t.options.ratio)n.css({height:m}),e.css({width:d,height:m}),s.css({height:m});else if(m>c){var u=Math.round((m-c)/2);e.css({width:d,height:m,top:-u})}else{var h=Math.round(c/o),l=Math.round((h-d)/2);e.css({width:h,height:c,left:-l})}},r.src=a.attr("src"),0===n.find(".minimus-caption").length&&void 0!==e.attr("title")&&""!==e.attr("title")&&n.append("<div class='minimus-caption'><p>"+e.attr("title")+"</p></div>").promise().done(function(){var i=n.find(".minimus-caption").outerHeight(!0);n.find(".minimus-caption").css({bottom:-i}).delay(800).animate({bottom:0},300)})}}function n(t){var n=i("#minimus-slide"+t.instance+"_"+t.current);if(n.find(".minimus-caption").length>0){var e=n.find(".minimus-caption").outerHeight(!0);n.find(".minimus-caption").css({bottom:-e}).delay(800).animate({bottom:0},300)}}function e(t,n,e){var r=i("#minimus-slide"+t.instance+"_"+t.current),o=i("#minimus-slide"+t.instance+"_"+n),s=t.options,d=t.calc_width,c=t.calc_height,m=0,u=0;switch("n"===e?(m=d+t.margin,u=c+t.margin):"p"===e&&(m=-(d+t.margin),u=-(c+t.margin)),s.animation_type){case"horizontal":r.css({left:m}).show(),o.animate({left:-m},s.animation_duration,function(){o.hide().toggleClass("active")}),r.animate({left:0},s.animation_duration,function(){a(t)});break;case"vertical":r.css({top:u}).show(),o.animate({top:-u},s.animation_duration,function(){o.hide().toggleClass("active")}),r.animate({top:0},s.animation_duration,function(){a(t)});break;case"fade":o.fadeOut(s.animation_duration).toggleClass("active"),r.fadeIn(s.animation_duration,function(){a(t)})}}function a(t){var n=i("#minimus-slide"+t.instance+"_"+t.current);n.toggleClass("active"),t.lock=0}function r(t,n){var e,a=i("#minimus-slide"+t+"_"+n);a.children().is("audio,video")&&(e=a.children("audio,video"),e[0].paused===!1&&e[0].pause())}function o(i){if("string"==typeof i){var t=i.indexOf("_");-1!=t&&(i=i.substr(t+1))}return i}function s(i,t){var n=t,e=0,a=0;if("string"==typeof i){var r=i.indexOf("%");-1!=r&&(e=parseInt(i.slice(0,-1))/100,a=Math.round(n*e))}else a=i;return a}function d(t){var n=t.slider,e=t.parent,a=t.slide,r=t.min_width,o=t.min_height,d=t.slider_ratio,c=t.calc_width,m=t.calc_height;c=s(t.options.width,Math.min(e.width(),i(window).width()));var u=i("#minimus-slide"+t.instance+"_"+t.current),h=u.find("img");if(h.length>0){var l=h,f=new Image;f.onload=function(){var i=f.width,n=f.height,e=n/i,a=t.slider,r=t.calc_width,o=t.calc_height,s=Math.round(r*e);if("adjust"===t.options.ratio)u.css({height:s}),h.css({width:r,height:s}),a.css({height:s});else if(s>o){var d=Math.round((s-o)/2);h.css({width:r,height:s,top:-d})}else{var c=Math.round(o/e),m=Math.round((c-r)/2);h.css({width:c,height:o,left:-m})}},f.src=l.attr("src")}return m=Math.round(c*d),r>c&&(c=r,m=Math.round(c*d),o>m&&(m=o)),o>m&&(m=o,c=Math.round(m/d),r>c&&(c=r)),a.css({width:c,height:m}),a.children("video,iframe").css({width:c,height:m}),n.css({width:c,height:m}),t.calc_width=c,t.calc_height=m,t.slide=a,t.slider=n,t}function c(i,t){var n=i.originalEvent.touches[0]||i.originalEvent.changedTouches[0];return void 0===i.originalEvent.touches&&(n=i),t.ox=n.pageX,t.oy=n.pageY,t.startTime=(new Date).getTime(),t}function m(i,t){var n=i.originalEvent.touches[0]||i.originalEvent.changedTouches[0];return void 0===i.originalEvent.touches&&(n=i),t.dx=n.pageX-t.ox,t.dy=n.pageY-t.oy,t.endTime=(new Date).getTime()-t.startTime,t}var u=[],h=0,l={init:function(n){this.each(function(){var e={width:"100%",height:"100%",ratio:.5625,animation_type:"horizontal",animation_duration:600,animation_start:"manual",animation_interval:4e3,width_reference:""},a=i(this),r=a.data("minimus"),o=i(),d=i(),l=i(),f=i(),p=i(),g=i(),v=i(),w=0,_=0,x=0,y=100,b=.565,k=0,M=0,T=320,z=180,D={},C=window.devicePixelRatio>1.3||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches,I=a.parent(),P=0;if(D.swipeTreshold=30,D.allowedTime=1e3,o=i.extend(e,n),a.attr("data-id","minimus-slider_"+h),d=a.find(".minimus-slide"),_=d.length-1,d.each(function(t){i(this).attr("id","minimus-slide"+h+"_"+t)}),l=a.next(".minimus-navslide"),f=l.find(".minimus-start").attr("data-id","minimus-start_"+h),p=l.find(".minimus-stop").attr("data-id","minimus-stop_"+h),g=l.find(".minimus-next").attr("data-id","minimus-next_"+h),v=l.find(".minimus-prev").attr("data-id","minimus-prev_"+h),void 0!==o.width_reference&&""!==o.width_reference&&(I=i("#"+o.width_reference)),k=s(o.width,I.width()),"number"==typeof o.ratio&&(b=o.ratio),M=Math.round(k*b),d.css({"box-sizing":"content-box",width:k,height:M,top:0,left:0}),void 0!==typeof d.children("img").attr("data-src")&&d.children("img").attr("src")!==d.children("img").attr("data-src")){var E=d.children("img").attr("src");d.children("img").css({background:"url("+E+") no-repeat center center"})}return d.children("img,video,iframe").css({"box-sizing":"content-box",position:"absolute",top:0,left:0,width:k,height:M}),d.not(":first").hide(),d.filter(":first").addClass("active"),a.css({"box-sizing":"content-box",width:k,height:M}),d.length>1?(g.on("click touchstart touchend",function(t){t.stopPropagation(),t.preventDefault(),i(this).minimus("next")}),v.on("click touchstart touchend",function(t){t.stopPropagation(),t.preventDefault(),i(this).minimus("prev")}),p.on("click",function(t){t.stopPropagation(),t.preventDefault(),a.minimus("stop"),i(this).hide(),f.show()}),f.on("click",function(t){t.stopPropagation(),t.preventDefault(),a.minimus("start"),i(this).hide(),p.show()}),a.on("touchstart.minimus",d.children("img,video,iframe"),function(t){t.stopPropagation(),t.preventDefault(),i(t.target).is("img,video,iframe")&&(D=c(t,D))}),a.on("touchend.minimus",d.children("img,video,iframe"),function(t){t.stopPropagation(),t.preventDefault(),i(t.target).is("img,video,iframe")&&(D=m(t,D),D.dx<-D.swipeTreshold&&D.endTime<D.allowedTime?a.minimus("next"):D.dx>D.swipeTreshold&&D.endTime<D.allowedTime&&a.minimus("prev"))}),i(document).on("keydown.minimus",function(i){37==(i.keyCode||i.which)&&a.minimus("prev"),39==(i.keyCode||i.which)&&a.minimus("next")})):l.hide(),a.data("minimus",{slider:a,parent:I,slide:d,totslides:_,margin:y,navslide:l,start:f,stop:p,prev:v,next:g,current:w,timer:x,options:o,instance:h,slider_ratio:b,calc_width:k,calc_height:M,min_width:T,min_height:z,mm:D,is_retina:C,lock:P}),r=a.data("minimus"),u[h]=r,t(a.data("minimus")),a.minimus("resize"),"auto"==o.animation_start&&d.length>1?(p.show(),f.hide(),a.minimus("start")):"manual"==o.animation_start&&(a.minimus("stop"),p.hide(),f.hide()),h++,u})},next:function(){var a=o(i(this).attr("data-id")),s=u[a],d=s.current;return 0===s.lock?(s.lock=1,s.current++,s.current>s.totslides&&(s.current=0),r(a,d),t(s),e(s,d,"n"),n(s),u[a]=s,u):void 0},prev:function(){var a=o(i(this).attr("data-id")),s=u[a],d=s.current;return 0===s.lock?(s.lock=1,s.current--,s.current<0&&(s.current=s.totslides),r(a,d),t(s),e(s,d,"p"),n(s),u[a]=s,u):void 0},resize:function(t){"number"!=typeof t&&(t=o(i(this).attr("data-id")));var n=u[t];return void 0!==n&&(n=d(n),u[t]=n),u},start:function(){var t=o(i(this).attr("data-id")),n=u[t],e=n.slider;return 0!==n.timer&&clearInterval(n.timer),n.timer=setInterval(function(){e.minimus("next")},n.options.animation_interval),u[t]=n,u},stop:function(){var t=o(i(this).attr("data-id")),n=u[t];return clearInterval(n.timer),u[t]=n,u},update:function(t){i(this).minimus("destroy"),i(this).minimus("init",t)},destroy:function(){var t=o(i(this).attr("data-id")),n=u[t];n.prev.off(),n.next.off(),n.slider.off("touchend.minimus"),i(document).off("keydown.minimus"),n.slider.minimus("stop"),n.slide.find("minimus-caption").remove(),i.removeData(n,"minimus"),this.unbind(),this.element=null}};i(window).resize(function(){setTimeout(function(){for(var t=0;h>t;t++)i.fn.minimus("resize",t)},100)}),i.fn.minimus=function(t){return l[t]?l[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void i.error("Method "+t+" does not exist on jQuery.minimus"):l.init.apply(this,arguments)}}(jQuery);